# Maintainer: Ari Mizrahi <codemunchies@gmail.com>

pkgname=netcommander
pkgver=git
pkgrel=5
pkgdesc="an easy to use arp spoofing tool"
arch=('i686' 'x86_64')
url=('https://github.com/evilsocket/netcommander')
license=('GPL2')
depends=('python2' 'scapy')
makedepends=('git')

_gitrepo=https://github.com/evilsocket/NetCommander.git

package() {
  # CLONE GIT REPOSITORY
  cd "${srcdir}"
  msg "Cloning netcommander source from ${_gitrepo} . . ."
  git clone ${_gitrepo} ${pkgname}

  # FIX PYTHON SHEBANGS
  find "${srcdir}"/${pkgname} -type f -exec sed -i 's/#!\/usr\/bin\/python/#!\/usr\/bin\/python2/g' {} \;  

  # COPY THE FILES WE NEED
  cd "${srcdir}"/${pkgname}
  install -dm755 ${pkgdir}/usr/bin/netcommander
  cp --preserve=mode -r * ${pkgdir}/usr/bin/netcommander
  
  # CREATE A SOFTLINK AS netcmd
  ln -s ${pkgdir}/usr/bin/netcommander/netcmd.py ${pkgdir}/usr/bin/netcmd
}